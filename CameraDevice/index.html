<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8"/>
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0">
    <meta name="description" content="Tizen basic template generated by Tizen Web IDE"/>

    <title>Tizen Web IDE - Tizen - Samsung Tizen TV basic Application</title>

    <script src="main.js"></script>
    <style>

    </style>
</head>

<body>
<table  id="canvas"  BGCOLOR="#000000" BORDER=0 CELLSPACING=0 CELLPADDING=0>
</table>
</body>
<script type="text/javascript" src="jsmpeg.min.js"></script>
<script type="text/javascript">
    getInfo((resp) => {
        const mode = resp.mode;
        let num = 1;
        if (mode === 4) {
            num = 2;
        } else if (mode === 16) {
            num = 4;
        }
        const table = document.getElementById("canvas");
        const trs = [];
        let tds = [];
        for (let i = 1; i < mode + 1; i++) {
            if (i !== 1 && ((i - 1) % (num) === 0)) {
                trs.push('<tr>' + tds.join('\n') + '</tr>');
                tds = [];
            }
            tds.push('<td> <canvas id="canvas' + i + '"/> </td>')
        }
        trs.push('<tr>' + tds.join('\n') + '</tr>');
        table.innerHTML = trs.join('\n')
        for (let i = 0; i < mode; i++) {
            const url = 'ws://' + serverInfo.ip + ':' + (9999 + i);
            new JSMpeg.Player(url, {
                canvas: document.getElementById('canvas' + (i + 1))
            })
        }
    })
</script>
</html>
