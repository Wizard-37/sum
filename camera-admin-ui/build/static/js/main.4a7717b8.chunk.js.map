{"version":3,"sources":["restCalls.js","components/Config.js","App.js","serviceWorker.js","index.js"],"names":["fetch","require","fetchData","url","a","method","headers","newUrl","transformResponse","req","withCredentials","timeout","ret","data","sendData","Option","Select","Config","props","state","loading","config","error","status","newCamera","ffmpeg","ffmpegPre","save","bind","handleMainTransportChange","handleCameraChange","cameraDatasource","cameraColumns","saveActiveChannel","addDatasource","commonColumns","this","setState","JSON","stringify","parse","message","title","dataIndex","key","render","text","meta","defaultValue","style","width","onChange","value","fieldName","Object","entries","map","keyValue","index","Text","disabled","editable","str","then","size","type","className","onClick","itemKey","valueItem","s","mode","camera1","camera2","camera3","camera4","newItem","streamUrl","channels","push","rtsp","pos","currentChannel","streamUrls","Array","isArray","length","i","console","log","transport","cameraNum","height","v","filter","channel","loadedConfig","forEach","camera","name","indicator","LoadingOutlined","fontSize","spin","commonDataSource","commonDatasource","code","file","columns","dataSource","pagination","total","pageSize","hideOnSinglePage","addColumns","React","Component","App","Boolean","window","location","hostname","match","ReactDOM","StrictMode","document","getElementById","navigator","serviceWorker","ready","registration","unregister","catch"],"mappings":"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","file":"static/js/main.4a7717b8.chunk.js","sourcesContent":["const fetch = require('axios');\nlet serverUrl = process.env.NODE_ENV !== 'production'? 'http://localhost:3004':'';\n\nexport async function fetchData(url, method = 'GET', headers) {\n    let newUrl = `${(serverUrl?serverUrl:'')}${url}`;\n    const ret = await fetch({\n        url: newUrl,\n        method,\n        headers,\n        transformResponse: (req) => req,\n        withCredentials: true,\n        timeout: 4900,\n    });\n    return ret.data;\n}\n\nexport async function sendData(url, method = 'POST', data, headers) {\n    const ret = await fetch({\n        url:`${(serverUrl?serverUrl:'')}${url}`,\n        method,\n        data,\n        transformResponse: (req) => req,\n        headers: headers || {\n            'Content-Type': 'application/json',\n        },\n        withCredentials: true,\n        timeout: 4900,\n    });\n    return ret.data;\n}\n\n","import React from 'react';\nimport './Config.css';\nimport {Alert, Button, Select, Spin, Table, Typography} from 'antd';\nimport {LoadingOutlined} from '@ant-design/icons';\nimport {fetchData, sendData} from \"../restCalls\";\n\nconst {Option} = Select;\n\n\nexport default class Config extends React.Component {\n\n    async save() {\n        this.setState(\n            {loading: true}\n        );\n        try {\n            const data = JSON.stringify(this.state.config.config);\n            const config = await sendData('/admin/config/save',\n                'POST', data);\n            this.setState({config: JSON.parse(config)});\n        } catch (e) {\n            this.setState({error: e.message});\n        } finally {\n            this.setState(\n                {loading: false}\n            )\n        }\n    }\n\n    async saveActiveChannel() {\n        this.setState(\n            {loading: true}\n        );\n        try {\n            const data = JSON.stringify(this.state.status);\n            const status = await sendData('/admin/status/save',\n                'POST', data);\n            this.setState({status: JSON.parse(status)});\n        } catch (e) {\n            this.setState({error: e.message});\n        } finally {\n            this.setState(\n                {loading: false}\n            )\n        }\n    }\n\n    commonColumns() {\n        return [\n            {\n                title: 'Parameter Name',\n                dataIndex: 'name',\n                key: 'name',\n                render: text => <a>{text}</a>,\n            },\n            {\n                title: 'Parameter Value',\n                dataIndex: 'value',\n                key: 'value',\n                render: (text, meta) => {\n                    if (meta.key === \"1\") {\n                        return (\n                            <div>\n                                <Select defaultValue={text} style={{width: 120}}\n                                        onChange={this.handleMainTransportChange}>\n                                    <Option value=\"udp\">UDP</Option>\n                                    <Option value=\"tcp\">TCP</Option>\n                                </Select>\n                            </div>)\n                    }\n                    if (meta.key === \"2\" || meta.key === \"3\") {\n                        const fieldName = meta.key === \"3\" ? 'ffmpeg' : 'ffmpegPre'\n                        return (\n                            <div>\n                                <div>\n                                    {\n                                        this.state.config.config[fieldName] ?\n                                            Object.entries(this.state.config.config[fieldName]).map((keyValue, index) => {\n                                                const key = keyValue[0];\n                                                const value = keyValue[1];\n                                                return (<div>\n                                                    <Typography.Text\n                                                        disabled>{key}\n                                                    </Typography.Text>\n                                                    <Typography.Text disabled>:</Typography.Text>\n                                                    <Typography.Text editable={{\n                                                        onChange: (str) => {\n                                                            const config = {...this.state.config};\n                                                            if (!config.config[fieldName]) {\n                                                                config.config[fieldName] = {};\n                                                            }\n                                                            config.config[fieldName][key] = str;\n                                                            this.save().then();\n                                                            this.setState({config});\n                                                        }\n                                                    }}>{value}</Typography.Text><Button size={\"small\"} type={\"danger\"}\n                                                                                        className={\"smallButton\"}\n                                                                                        onClick={\n                                                                                            () => {\n                                                                                                const config = {...this.state.config};\n                                                                                                if (!config.config[fieldName]) {\n                                                                                                    config.config[fieldName] = {};\n                                                                                                }\n                                                                                                delete config.config[fieldName][key];\n                                                                                                this.setState({config})\n                                                                                                this.save().then();\n                                                                                            }\n                                                                                        }>-</Button>\n                                                </div>);\n                                            }) : <div/>\n                                    }\n                                    {\n                                        <div>\n                                            <Typography.Text\n                                                editable={{\n                                                    onChange: (str) => {\n                                                        const ffmpeg = {...this.state[fieldName]};\n                                                        ffmpeg.key = str;\n                                                        ffmpeg.itemKey = -1;\n                                                        this.setState({ffmpeg});\n                                                    }\n                                                }}>{this.state[fieldName] && this.state[fieldName].itemKey === -1 ? this.state[fieldName].key : ''}\n                                            </Typography.Text>\n                                            <Typography.Text disabled>:</Typography.Text>\n                                            <Typography.Text editable={{\n                                                onChange: (str) => {\n\n                                                    const ffmpeg = {...this.state[fieldName]};\n                                                    ffmpeg.value = str;\n                                                    ffmpeg.valueItem = -1;\n                                                    this.setState({ffmpeg});\n                                                }\n                                            }}>{this.state[fieldName] && this.state[fieldName].valueItem === -1 ? this.state[fieldName].value : ''}</Typography.Text>\n                                            {this.state[fieldName].valueItem === -1 && this.state[fieldName].itemKey === -1 ?\n                                                <Button onClick={\n                                                    () => {\n                                                        const ffmpeg = {...this.state[fieldName]};\n                                                        const config = {...this.state.config};\n                                                        if (!config.config[fieldName]) {\n                                                            config.config[fieldName] = {};\n                                                        }\n                                                        config.config[fieldName][ffmpeg.key] = ffmpeg.value;\n                                                        this.setState({config})\n                                                        this.save().then(() => {\n                                                            const s = {};\n                                                            s[fieldName] = {};\n                                                            this.setState(s)\n                                                        });\n                                                    }\n                                                }>Add</Button>\n                                                : <Button disabled>Add</Button>\n                                            }\n                                        </div>\n                                    }\n                                </div>\n                            </div>)\n                    }\n                    return (<a>{text}</a>);\n                }\n            }]\n    }\n\n    addColumns() {\n        return [{\n            title: 'Mode',\n            dataIndex: 'mode',\n            key: 'mode',\n            render: (text) => {\n                return (<div>\n                    <Select defaultValue={text} style={{width: 120}}\n                            onChange={this.handleCameraChange}>\n                        <Option value=\"single\">1 Camera</Option>\n                        <Option value=\"multi\">4 Cameras</Option>\n                    </Select>\n                </div>)\n            }\n        },\n            {\n                title: 'rtsp Streams',\n                dataIndex: 'rtsp',\n                key: 'rtsp',\n                render: () => {\n                    return this.state.newCamera.mode === 'multi' ? (\n                        <div>\n                            <Typography.Text editable={{\n                                onChange: (str) => {\n                                    const newCamera = {...this.state.newCamera};\n                                    newCamera.camera1 = str;\n                                    this.setState({newCamera});\n                                }\n                            }}>{this.state.newCamera.camera1 || ''}</Typography.Text>\n                            <br/>\n                            <Typography.Text editable={{\n                                onChange: (str) => {\n                                    const newCamera = {...this.state.newCamera};\n                                    newCamera.camera2 = str;\n                                    this.setState({newCamera});\n                                }\n                            }}>{this.state.newCamera.camera2 || ''}</Typography.Text>\n                            <br/>\n                            <Typography.Text editable={{\n                                onChange: (str) => {\n                                    const newCamera = {...this.state.newCamera};\n                                    newCamera.camera3 = str;\n                                    this.setState({newCamera});\n                                }\n                            }}>{this.state.newCamera.camera3 || ''}</Typography.Text>\n                            <br/>\n                            <Typography.Text editable={{\n                                onChange: (str) => {\n                                    const newCamera = {...this.state.newCamera};\n                                    newCamera.camera4 = str;\n                                    this.setState({newCamera});\n                                }\n                            }}>{this.state.newCamera.camera4 || ''}</Typography.Text>\n                            <br/>\n                        </div>) : <Typography.Text editable={{\n                        onChange: (str) => {\n                            const newCamera = {...this.state.newCamera};\n                            newCamera.camera1 = str;\n                            this.setState({newCamera});\n                        }\n                    }}>{this.state.newCamera.camera1 || ''}</Typography.Text>\n                }\n            },\n            {\n                title: '',\n                dataIndex: 'save',\n                key: 'save',\n                render: () => {\n                    const mode = this.state.newCamera.mode || 'single';\n                    let disabled = false;\n                    if (mode === 'single' && !this.state.newCamera.camera1) {\n                        disabled = true;\n                    }\n                    if (mode === 'multi' &&\n                        (!this.state.newCamera.camera1 ||\n                            !this.state.newCamera.camera2 ||\n                            !this.state.newCamera.camera3 ||\n                            !this.state.newCamera.camera4\n                        )) {\n                        disabled = true;\n                    }\n                    return disabled ? (<div>\n                        <Button disabled>Save</Button>\n                    </div>) : <div><Button onClick={\n                        () => {\n                            const config = {...this.state.config};\n                            let newItem;\n                            if (mode === 'single') {\n                                newItem = {\n                                    streamUrl: this.state.newCamera.camera1,\n                                }\n                            } else {\n                                newItem = {\n                                    streamUrl: [this.state.newCamera.camera1,\n                                        this.state.newCamera.camera2,\n                                        this.state.newCamera.camera3,\n                                        this.state.newCamera.camera4]\n                                }\n                            }\n\n                            config.config.channels.push(newItem);\n                            this.setState({config})\n                            this.save().then(() => {\n                                this.setState({newCamera: {}})\n                            })\n                        }\n                    }>Save</Button></div>\n                }\n            },]\n    }\n\n    addDatasource() {\n        const newCamera = this.state.newCamera;\n        return [{\n            mode: newCamera.mode || 'single',\n            rtsp: [newCamera.camera1, newCamera.camera2, newCamera.camera3, newCamera.camera4]\n        }]\n    }\n\n    cameraColumns() {\n        return [\n            {\n                title: 'Status',\n                dataIndex: 'status',\n                key: 'status',\n                render: (status, meta, pos) => {\n                    return status ?\n                        <Typography.Text>Current</Typography.Text>\n                        : <Button onClick={\n                            () => {\n                                this.state.status.currentChannel = pos;\n                                this.saveActiveChannel().then()\n                            }\n                        }>Activate</Button>\n\n                },\n            },\n            {\n                title: 'Camera',\n                dataIndex: 'camera',\n                key: 'camera',\n                render: text => <a>{text}</a>,\n            },\n            {\n                title: 'Camera Mode',\n                dataIndex: 'mode',\n                key: 'mode',\n                render: (text) => <a>{text === 1 ? '1 Camera' : '4 Cameras'}</a>,\n            },\n            {\n                title: 'rtsp Streams',\n                dataIndex: 'rtsp',\n                key: 'rtsp',\n                render: (streamUrls, meta, data) => {\n                    if (streamUrls) {\n                        if (Array.isArray(streamUrls)) {\n                            if (streamUrls.length > 1) {\n                                return streamUrls.map(((streamUrl, i) => {\n                                    return <div><Typography.Text editable={{\n                                        onChange: (str) => {\n                                            this.state.config.config.channels[data].streamUrl[i] = str;\n                                            this.save().then();\n                                        }\n                                    }}>{streamUrl}</Typography.Text><br/></div>\n                                }))\n                            } else {\n                                return <Typography.Text editable={{\n                                    onChange: (str) => {\n                                        this.state.config.config.channels[data].streamUrl = str;\n                                        this.save().then();\n                                    }\n                                }}>{streamUrls.length > 0 ? streamUrls[0] : ''}</Typography.Text>\n                            }\n                        } else {\n                            return <Typography.Text editable={{\n                                onChange: (str) => {\n                                    this.state.config.config.channels[data].streamUrl = str;\n                                    this.save().then();\n                                }\n                            }}>{streamUrls}</Typography.Text>\n                        }\n                    } else {\n                        return <a/>\n                    }\n                }\n            },\n            {\n                title: 'Transport',\n                dataIndex: 'transport',\n                key: 'transport',\n                render: (text, meta, index) => {\n                    return (\n                        <div>\n                            <Select defaultValue={text} style={{width: 120}}\n                                    onChange={(value) => {\n                                        debugger;\n                                        console.log(`selected ${value}`);\n                                        const config = {...this.state.config};\n                                        config.config.channels[index].transport = value;\n                                        this.setState(\n                                            {config}\n                                        )\n                                        this.save().then();\n                                    }}>\n                                <Option value=\"udp\">UDP</Option>\n                                <Option value=\"tcp\">TCP</Option>\n                            </Select>\n                        </div>)\n                }\n            },\n            {\n                title: 'Pre FFmpeg Parameters',\n                dataIndex: 'ffmpegPre',\n                key: 'ffmpegPre',\n                render: (text, meta, index) => {\n                    return (<div>\n                        <div>\n                            {\n                                this.state.config.config.channels[index].ffmpegPre ?\n                                    Object.entries(this.state.config.config.channels[index].ffmpegPre).map((keyValue) => {\n                                        const key = keyValue[0];\n                                        const value = keyValue[1];\n                                        return (<div>\n                                            <Typography.Text\n                                                disabled>{key}\n                                            </Typography.Text>\n                                            <Typography.Text disabled>:</Typography.Text>\n                                            <Typography.Text editable={{\n                                                onChange: (str) => {\n                                                    const config = {...this.state.config};\n                                                    if (!config.config.channels[index].ffmpegPre) {\n                                                        config.config.channels[index].ffmpegPre = {};\n                                                    }\n                                                    config.config.channels[index].ffmpegPre[key] = str;\n                                                    this.save().then();\n                                                    this.setState({config});\n                                                }\n                                            }}>{value}</Typography.Text><Button size={\"small\"} type={\"danger\"}\n                                                                                className={\"smallButton\"} onClick={\n                                            () => {\n                                                const config = {...this.state.config};\n                                                if (!config.config.channels[index].ffmpegPre) {\n                                                    config.config.channels[index].ffmpegPre = {};\n                                                }\n                                                delete config.config.channels[index].ffmpegPre[key];\n                                                this.setState({config})\n                                                this.save().then();\n                                            }\n                                        }>-</Button>\n                                        </div>);\n                                    }) : <div/>\n                            }\n                            {\n                                <div>\n                                    <Typography.Text\n                                        editable={{\n                                            onChange: (str) => {\n                                                const ffmpeg = {...this.state.ffmpegPre};\n                                                ffmpeg.key = str;\n                                                ffmpeg.itemKey = index;\n                                                this.setState({ffmpegPre: ffmpeg});\n                                            }\n                                        }}>{this.state.ffmpegPre && this.state.ffmpegPre.itemKey === index ? this.state.ffmpegPre.key : ''}\n                                    </Typography.Text>\n                                    <Typography.Text disabled>:</Typography.Text>\n                                    <Typography.Text editable={{\n                                        onChange: (str) => {\n\n                                            const ffmpeg = {...this.state.ffmpegPre};\n                                            ffmpeg.value = str;\n                                            ffmpeg.valueItem = index;\n                                            this.setState({ffmpegPre: ffmpeg});\n                                        }\n                                    }}>{this.state.ffmpegPre && this.state.ffmpegPre.valueItem === index ? this.state.ffmpegPre.value : ''}</Typography.Text>\n                                    {this.state.ffmpegPre.valueItem === index && this.state.ffmpegPre.itemKey === index ?\n                                        <Button onClick={\n                                            () => {\n                                                const ffmpeg = {...this.state.ffmpegPre};\n                                                const config = {...this.state.config};\n                                                if (!config.config.channels[index].ffmpegPre) {\n                                                    config.config.channels[index].ffmpegPre = {};\n                                                }\n                                                config.config.channels[index].ffmpegPre[ffmpeg.key] = ffmpeg.value;\n                                                this.setState({config})\n                                                this.save().then(() => {\n                                                    this.setState({ffmpeg: {}})\n                                                });\n                                            }\n                                        }>Add</Button>\n                                        : <Button disabled>Add</Button>\n                                    }\n                                </div>\n                            }\n                        </div>\n                    </div>)\n                },\n            },\n            {\n                title: 'Post FFmpeg Parameters',\n                dataIndex: 'ffmpeg',\n                key: 'ffmpeg',\n                render: (text, meta, index) => {\n                    const cameraNum = Array.isArray(this.state.config.config.channels[index].streamUrl) ?\n                        this.state.config.config.channels[index].streamUrl.length : 1\n                    return (<div>\n                        <Typography.Text\n                            disabled>-vf</Typography.Text>\n                        <Typography.Text disabled>:</Typography.Text>\n                        <Typography.Text\n                            disabled>{`scale=${this.state.status.width / cameraNum}:${this.state.status.height / cameraNum}`}</Typography.Text>\n                        <br/>\n\n                        <div>\n                            {\n                                this.state.config.config.channels[index].ffmpeg ?\n                                    Object.entries(this.state.config.config.channels[index].ffmpeg).map((keyValue) => {\n                                        const key = keyValue[0];\n                                        const value = keyValue[1];\n                                        return (<div>\n                                            <Typography.Text\n                                                disabled>{key}\n                                            </Typography.Text>\n                                            <Typography.Text disabled>:</Typography.Text>\n                                            <Typography.Text editable={{\n                                                onChange: (str) => {\n                                                    const config = {...this.state.config};\n                                                    if (!config.config.channels[index].ffmpeg) {\n                                                        config.config.channels[index].ffmpeg = {};\n                                                    }\n                                                    config.config.channels[index].ffmpeg[key] = str;\n                                                    this.save().then();\n                                                    this.setState({config});\n                                                }\n                                            }}>{value}</Typography.Text><Button size={\"small\"} type={\"danger\"}\n                                                                                className={\"smallButton\"} onClick={\n                                            () => {\n                                                const config = {...this.state.config};\n                                                if (!config.config.channels[index].ffmpeg) {\n                                                    config.config.channels[index].ffmpeg = {};\n                                                }\n                                                delete config.config.channels[index].ffmpeg[key];\n                                                this.save().then();\n                                                this.setState({config})\n                                            }\n                                        }>-</Button>\n                                        </div>);\n                                    }) : <div/>\n                            }\n                            {\n                                <div>\n                                    <Typography.Text\n                                        editable={{\n                                            onChange: (str) => {\n                                                const ffmpeg = {...this.state.ffmpeg};\n                                                ffmpeg.key = str;\n                                                ffmpeg.itemKey = index;\n                                                this.setState({ffmpeg});\n                                            }\n                                        }}>{this.state.ffmpeg && this.state.ffmpeg.itemKey === index ? this.state.ffmpeg.key : ''}\n                                    </Typography.Text>\n                                    <Typography.Text disabled>:</Typography.Text>\n                                    <Typography.Text editable={{\n                                        onChange: (str) => {\n\n                                            const ffmpeg = {...this.state.ffmpeg};\n                                            ffmpeg.value = str;\n                                            ffmpeg.valueItem = index;\n                                            this.setState({ffmpeg});\n                                        }\n                                    }}>{this.state.ffmpeg && this.state.ffmpeg.valueItem === index ? this.state.ffmpeg.value : ''}</Typography.Text>\n                                    {this.state.ffmpeg.valueItem === index && this.state.ffmpeg.itemKey === index ?\n                                        <Button onClick={\n                                            () => {\n                                                const ffmpeg = {...this.state.ffmpeg};\n                                                const config = {...this.state.config};\n                                                if (!config.config.channels[index].ffmpeg) {\n                                                    config.config.channels[index].ffmpeg = {};\n                                                }\n                                                config.config.channels[index].ffmpeg[ffmpeg.key] = ffmpeg.value;\n                                                this.setState({config})\n                                                this.save().then(() => {\n                                                    this.setState({ffmpeg: {}})\n                                                });\n                                            }\n                                        }>Add</Button>\n                                        : <Button disabled>Add</Button>\n                                    }\n                                </div>\n                            }\n                        </div>\n                    </div>)\n                },\n            },\n            {\n                title: '',\n                dataIndex: 'actions',\n                key: 'actions',\n                render: (data, meta, index) => {\n                    const onUp = () => {\n                        const config = {...this.state.config};\n                        const v = config.config.channels[index];\n                        config.config.channels[index] = config.config.channels[index - 1]\n                        config.config.channels[index - 1] = v;\n                        let status = {...this.state.status};\n                        if (status.currentChannel === index) {\n                            status.currentChannel = status.currentChannel - 1;\n                        }\n                        this.setState({config, status})\n                        this.save().then(() => {\n                            this.saveActiveChannel().then()\n                        });\n                    };\n                    const onDown = () => {\n                        const config = {...this.state.config};\n                        const v = config.config.channels[index];\n                        config.config.channels[index] = config.config.channels[index + 1]\n                        config.config.channels[index + 1] = v;\n                        let status = {...this.state.status};\n                        if (status.currentChannel === index) {\n                            status.currentChannel = status.currentChannel + 1;\n                        }\n                        this.setState({config, status});\n                        this.save().then(() => {\n                            this.saveActiveChannel().then()\n                        });\n                    };\n                    return (\n                        <div>\n                            {index === 0 ? <Button size={\"small\"} className={\"smallButton\"} disabled>UP</Button> :\n                                <Button size={\"small\"} className={\"smallButton\"} onClick={onUp}>UP</Button>}\n                            {index === this.state.config.config.channels.length - 1 ?\n                                <Button size={\"small\"} className={\"smallButton\"} disabled>DOWN</Button> :\n                                <Button size={\"small\"} className={\"smallButton\"} onClick={onDown}>DOWN</Button>}\n                            <Button size={\"small\"} type={\"danger\"} className={\"smallButton\"} onClick={() => {\n                                const config = {...this.state.config};\n                                config.config.channels = config.config.channels.filter((channel, i) => {\n                                    return i !== index\n                                });\n                                this.setState({config})\n                                this.save().then();\n                            }}>Delete</Button>\n                        </div>\n                    )\n                }\n\n            }]\n    }\n\n    cameraDatasource(loadedConfig) {\n        const ret = [];\n        if (loadedConfig.channels) {\n            loadedConfig.channels.forEach((channel, index) => {\n                ret.push({\n                    status: index === this.state.status.currentChannel,\n                    camera: index,\n                    transport: channel.transport || loadedConfig.transport || 'udp',\n                    mode: Array.isArray(channel.streamUrl) && channel.streamUrl.length > 1 ? 4 : 1,\n                    rtsp: channel.streamUrl,\n                    ffmpeg: channel.ffmpeg,\n                    ffmpegPre: channel.ffmpegPre,\n                });\n            })\n        }\n        return ret;\n    }\n\n    commonDatasource(loadedConfig) {\n        return [\n            {\n                key: '1',\n                name: 'Default Transport',\n                value: loadedConfig.transport,\n            },\n            {\n                key: '2',\n                name: 'Default Pre ffmpeg Parameters',\n                value: loadedConfig.ffmpegPre,\n            },\n            {\n                key: '3',\n                name: 'Default Post ffmpeg Parameters',\n                value: loadedConfig.ffmpeg,\n            },\n\n        ]\n    }\n\n    constructor(props) {\n        super(props);\n        this.state = {\n            loading: true,\n            config: null,\n            error: null,\n            status: null,\n            newCamera: {},\n            ffmpeg: {},\n            ffmpegPre: {},\n        };\n        this.save = this.save.bind(this);\n        this.handleMainTransportChange = this.handleMainTransportChange.bind(this);\n        this.handleCameraChange = this.handleCameraChange.bind(this);\n        this.cameraDatasource = this.cameraDatasource.bind(this);\n        this.cameraColumns = this.cameraColumns.bind(this);\n        this.saveActiveChannel = this.saveActiveChannel.bind(this);\n        this.addDatasource = this.addDatasource.bind(this);\n        this.commonColumns = this.commonColumns.bind(this);\n    }\n\n    async componentDidMount() {\n        this.setState(\n            {loading: true}\n        )\n        try {\n            const config = await fetchData('/admin/config/get', 'GET');\n            const status = await fetchData('/admin/status/get', 'GET');\n            this.setState({config: JSON.parse(config)});\n            this.setState({status: JSON.parse(status)});\n        } catch (e) {\n            this.setState({error: e.message});\n        } finally {\n            this.setState(\n                {loading: false}\n            )\n        }\n\n\n    }\n\n    handleMainTransportChange(value) {\n        console.log(`selected ${value}`);\n        const config = {...this.state.config};\n        config.config.transport = value;\n        this.setState(\n            {config}\n        )\n        this.save().then();\n    }\n\n\n    handleCameraChange(value) {\n        console.log(`selected ${value}`);\n        const newCamera = {...this.state.newCamera};\n        newCamera.mode = value;\n        this.setState(\n            {newCamera}\n        )\n    }\n\n    render() {\n\n        const {loading, config, error} = this.state;\n        let ret;\n        if (loading) {\n            ret = <Spin indicator={(<LoadingOutlined style={{fontSize: 128}} spin/>)}/>\n        } else {\n            if (!config || !config.config) {\n                ret = <Alert message=\"config is empty\" type=\"error\"/>\n            } else {\n                const loadedConfig = config.config;\n                const commonDataSource = this.commonDatasource(loadedConfig);\n                const cameraDatasource = this.cameraDatasource(loadedConfig);\n                ret =\n                    <div>\n                        {error ? <Alert message={error} type=\"error\"/> : null\n                        }\n                        <Typography.Text>Common Settings</Typography.Text>\n                        <br/>\n                        <Typography.Text code>File: {loadedConfig.file}</Typography.Text>\n                        <br/>\n                        <Table columns={this.commonColumns()}\n                               dataSource={commonDataSource}\n                               pagination={{\n                                   total: commonDataSource.length,\n                                   pageSize: commonDataSource.length,\n                                   hideOnSinglePage: true\n                               }}/>\n                        <br/>\n                        <br/>\n                        <Typography.Text>Add new Camera</Typography.Text>\n                        <br/>\n                        <Table columns={this.addColumns()}\n                               dataSource={this.addDatasource()}\n                               pagination={{\n                                   hideOnSinglePage: true\n                               }}/>\n                        <Typography.Text>Camera Settings</Typography.Text>\n                        <br/>\n                        <Table columns={this.cameraColumns()}\n                               dataSource={cameraDatasource}\n                               pagination={{\n                                   total: cameraDatasource.length,\n                                   pageSize: cameraDatasource.length,\n                                   hideOnSinglePage: true\n                               }}/>\n                    </div>\n\n            }\n        }\n\n        return ret;\n    }\n}\n","import React from 'react';\nimport Config from './components/Config';\nimport './App.css';\nimport {Typography} from \"antd\";\n\nfunction App() {\n  return (\n    <div className=\"App\">\n      <header className=\"App-header\">\n          <Config/>\n      </header>\n\n    </div>\n  );\n}\n\nexport default App;\n","// This optional code is used to register a service worker.\n// register() is not called by default.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on subsequent visits to a page, after all the\n// existing tabs open on the page have been closed, since previously cached\n// resources are updated in the background.\n\n// To learn more about the benefits of this model and instructions on how to\n// opt-in, read https://bit.ly/CRA-PWA\n\nconst isLocalhost = Boolean(\n  window.location.hostname === 'localhost' ||\n    // [::1] is the IPv6 localhost address.\n    window.location.hostname === '[::1]' ||\n    // 127.0.0.0/8 are considered localhost for IPv4.\n    window.location.hostname.match(\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\n    )\n);\n\nexport function register(config) {\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\n    // The URL constructor is available in all browsers that support SW.\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location.href);\n    if (publicUrl.origin !== window.location.origin) {\n      // Our service worker won't work if PUBLIC_URL is on a different origin\n      // from what our page is served on. This might happen if a CDN is used to\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\n      return;\n    }\n\n    window.addEventListener('load', () => {\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\n\n      if (isLocalhost) {\n        // This is running on localhost. Let's check if a service worker still exists or not.\n        checkValidServiceWorker(swUrl, config);\n\n        // Add some additional logging to localhost, pointing developers to the\n        // service worker/PWA documentation.\n        navigator.serviceWorker.ready.then(() => {\n          console.log(\n            'This web app is being served cache-first by a service ' +\n              'worker. To learn more, visit https://bit.ly/CRA-PWA'\n          );\n        });\n      } else {\n        // Is not localhost. Just register service worker\n        registerValidSW(swUrl, config);\n      }\n    });\n  }\n}\n\nfunction registerValidSW(swUrl, config) {\n  navigator.serviceWorker\n    .register(swUrl)\n    .then(registration => {\n      registration.onupdatefound = () => {\n        const installingWorker = registration.installing;\n        if (installingWorker == null) {\n          return;\n        }\n        installingWorker.onstatechange = () => {\n          if (installingWorker.state === 'installed') {\n            if (navigator.serviceWorker.controller) {\n              // At this point, the updated precached content has been fetched,\n              // but the previous service worker will still serve the older\n              // content until all client tabs are closed.\n              console.log(\n                'New content is available and will be used when all ' +\n                  'tabs for this page are closed. See https://bit.ly/CRA-PWA.'\n              );\n\n              // Execute callback\n              if (config && config.onUpdate) {\n                config.onUpdate(registration);\n              }\n            } else {\n              // At this point, everything has been precached.\n              // It's the perfect time to display a\n              // \"Content is cached for offline use.\" message.\n              console.log('Content is cached for offline use.');\n\n              // Execute callback\n              if (config && config.onSuccess) {\n                config.onSuccess(registration);\n              }\n            }\n          }\n        };\n      };\n    })\n    .catch(error => {\n      console.error('Error during service worker registration:', error);\n    });\n}\n\nfunction checkValidServiceWorker(swUrl, config) {\n  // Check if the service worker can be found. If it can't reload the page.\n  fetch(swUrl, {\n    headers: { 'Service-Worker': 'script' },\n  })\n    .then(response => {\n      // Ensure service worker exists, and that we really are getting a JS file.\n      const contentType = response.headers.get('content-type');\n      if (\n        response.status === 404 ||\n        (contentType != null && contentType.indexOf('javascript') === -1)\n      ) {\n        // No service worker found. Probably a different app. Reload the page.\n        navigator.serviceWorker.ready.then(registration => {\n          registration.unregister().then(() => {\n            window.location.reload();\n          });\n        });\n      } else {\n        // Service worker found. Proceed as normal.\n        registerValidSW(swUrl, config);\n      }\n    })\n    .catch(() => {\n      console.log(\n        'No internet connection found. App is running in offline mode.'\n      );\n    });\n}\n\nexport function unregister() {\n  if ('serviceWorker' in navigator) {\n    navigator.serviceWorker.ready\n      .then(registration => {\n        registration.unregister();\n      })\n      .catch(error => {\n        console.error(error.message);\n      });\n  }\n}\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport 'antd/dist/antd.css';\nimport App from './App';\nimport * as serviceWorker from './serviceWorker';\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById('root')\n);\n\n// If you want your app to work offline and load faster, you can change\n// unregister() to register() below. Note this comes with some pitfalls.\n// Learn more about service workers: https://bit.ly/CRA-PWA\nserviceWorker.unregister();\n"],"sourceRoot":""}